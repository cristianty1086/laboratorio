openapi: 3.0.1
info:
  title: API UX MBBK Favorite Management V1
  description: |
    API de experiencia encargada de administrar los favoritos y su nivel de seguridad.
  version: "1.0.9"
servers:
  - url: /channel/mbbk/v1
x-bcp-api-type: UX
x-bcp-api-id: mbbk-favorite-management
externalDocs:
  description: 'Para mas informacion de la API UX MBBK Favorite Management V1'
  url: https://confluence.lima.bcp.com.pe/display/BM/API+UX+MBBK+FavoriteManagement+V1
tags:
  - name: Favorites Security
    description: Favorites Security Controller
  - name: Favorite
    description: Favorite Controller
paths:
  /favorites-management/favorites-security:
    get:
      tags:
        - Favorites Security
      summary: Consulta la seguridad requerida para ejecutar una transacción monetaria como favorito.
      description: |-
        ### Acerca de la funcionalidad expuesta

        Servicio que permite verificar si existe un favorito a partir de su identificador, CIC y código de operación. Si dicha combinación se cumple, el servicio retornará la seguridad requerida para ejecutar una transacción monetaria como favorito.

        ### Data de Prueba

        Ninguno.

        ### Precondiciones para el consumo de esta versión de la API

        Ninguno.
        
        ### Usos válidos de Query Parameters

        No aplica.

        ### Variantes válidas del Payload (Cuerpo del mensaje)

        No aplica.

        ### Lista de Valores usadas en esta versión de la API

        No aplica.

        ### Códigos de error usados en esta versión de la API

        | Código | HTTP Status | Descripción |
        | --- | --- | --- |
        | BM0001 | 401 | Sesion expirada o inexistente. |
        | BM0002 | 401 | Sesion invalida. |
        | BM9999 | 400 | Ha ocurrido un error en el servicio. |
        | BM9999 | 500 | Ha ocurrido un error en el servicio. |
        | BM9999 | 503 | Ha ocurrido un error en el servicio. |
      operationId: getFavoriteSecurity
      parameters:
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Authorization'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Request-ID'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/request-date'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/app-code'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/caller-name'
        - name: app-name
          in: header
          description: 'Nombre descriptivo de la aplicacion (Ej. MBBK)'
          required: true
          schema:
            maxLength: 15
            minLength: 0
            type: string
        - name: session-UID
          in: header
          description: 'Llave de Sesion: Identificador unico que permitira vincular todos los eventos relacionados a una sesion del usuario. (Ej. f61d4fae-3dec-11d0-a765-00a0c11e6bf7)'
          required: true
          schema:
            type: string
            maxLength: 200
        - name: orig-device-reference
          in: header
          description: 'Referencia adicional para identificar dispositivo. (Ej. 605ce417-198c-474c-8489-b106714003cf)'
          required: true
          schema:
            type: string
            maxLength: 40
      responses:
        "200":
          description: Proceso Satisfactorio.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindFavoritesSecurityResponse'
        "400":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "401":
          description: Sesion invalida.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "503":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "500":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
      x-atlas-header:
        $ref: '#/components/schemas/FindFavoritesSecurityHeaders'
  /favorites-management/favorites-security/{favoriteSecurityId}:
    patch:
      tags:
        - Favorites Security
      summary: Actualización de los datos de seguridad requerida para ejecutar una
        transacción monetaria como favorito.
      description: |-
        ### Acerca de la funcionalidad expuesta

        Servicio que permite actualizar los datos de seguridad requerida para ejecutar una transacción monetaria como favorito.
        
        #### Autenticación con Modo de Firma
        
        Para realizar la actualización de los detos de seguridad del cliente, es necesario autenticar la operación con el modo de firma. 
        
        Existen dos tipos de autenticación:
        
        - Autenticación Biometrica: aplica para los modos de firma Finger Print(Andriod), FaceId y TouchId (iOS), para esta autenticación solo se valida que el modo de firma ingresado en el parametro **signatureMode.signatureModeId** es el mismo que tiene registrado el cliente en la base de datos y que el parametro **keyboard** sea null.
        - Autenticación **No** Biometrica: aplica para los modos de firma Hard Token y Soft Token, para esta autenticación se valida que el modo de firma ingresado en el parametro **signatureMode.signatureModeId** es el mismo que tiene registrado el cliente en la base de datos, que el parametro **keyboard** **no** sea null y que el valor del objeto **keyboard** sea valido para RSA.
        
        ### Data de Prueba

        Ninguno.

        ### Precondiciones para el consumo de esta versión de la API

        No aplica.
        
        ### Usos válidos de Query Parameters

        No aplica.

        ### Path Parameters

        | Resultado Esperado | Path Param | Path Parameter requerido |
        | --- | --- | --- |
        | Actualizar seguridad requerida para ejecutar la operación como favorito | Si | favoriteSecurityId |

        ### Variantes válidas del Payload (Cuerpo del mensaje)

        Esta funcionalidad permite además manejar distintos tipos de payloads dependiendo del tipo de modo de firma y de la activación o desactivación de la seguridad requerida para ejecutar una transacción monetaria como favorito. A continuación los siguientes casos:
        
        **Caso 1 - Activación de la seguridad requerida para ejecutar una transacción monetaria como favorito**
        
        ```
        {
          "hasSecurity": true
          }
        ```
        
        **Caso 2 - Desactivación de la seguridad requerida para ejecutar una transacción monetaria como favorito con autenticación de modo de firma Biométrico**
        
        El objeto keyboard no es obligatorio.
        ```
        {
          "authorization": {
            "userSignatureMode": {
              "signatureModeId": 3
              }
            },
          "hasSecurity": false
          }
        ```
        
        **Caso 3 - Desactivación de la seguridad requerida para ejecutar una transacción monetaria como favorito con autenticación de modo de firma No Biométrico**
        
        El objeto keyboard es obligatorio.
        ```
        {
          "authorization": {
            "userSignatureMode": {
              "signatureModeId": 1
              },
            "keyboard": {
              "seed": "66a2ddf8-6127-42de-892f-6f410c191ca3",
              "keys": [
                {
                  "value": "24920057-6557-4c8b-87a8-e3a1675b18fd"
                  },
                {
                  "value": "24920057-6557-4c8b-87a8-e3a1675b18fd"
                  },
                {
                  "value": "24920057-6557-4c8b-87a8-e3a1675b18fd"
                  },
                {
                  "value": "24920057-6557-4c8b-87a8-e3a1675b18fd"
                  },
                {
                  "value": "24920057-6557-4c8b-87a8-e3a1675b18fd"
                  },
                {
                  "value": "24920057-6557-4c8b-87a8-e3a1675b18fd"
                  }
                ]
              }
            },          
          "hasSecurity": false
          }
        ```

        ### Lista de Valores usadas en esta versión de la API

        No aplica.

        ### Códigos de error usados en esta versión de la API

        | Código | HTTP Status | Descripción |
        | --- | --- | --- |
        | BM0001 | 401 | Sesion expirada o inexistente. |
        | BM0002 | 401 | Sesion invalida. |
        | BM0180 | 409 | La Clave del Token que ingresaste es incorrecto. |
        | BM0182 | 409 | La Clave del Token que ingresaste es incorrecto. |
        | BM9999 | 400 | Ha ocurrido un error en el servicio. |
        | BM9999 | 401 | Ha ocurrido un error en el servicio. |
        | BM9999 | 500 | Ha ocurrido un error en el servicio. |
        | BM9999 | 503 | Ha ocurrido un error en el servicio. |
      operationId: updateFavoriteSecurity
      parameters:
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Authorization'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Request-ID'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/request-date'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/app-code'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/caller-name'
        - name: app-name
          in: header
          description: 'Nombre descriptivo de la aplicacion (Ej. MBBK)'
          required: true
          schema:
            maxLength: 15
            minLength: 0
            type: string
        - name: session-UID
          in: header
          description: 'Llave de Sesion: Identificador unico que permitira vincular todos los eventos relacionados a una sesion del usuario. (Ej. f61d4fae-3dec-11d0-a765-00a0c11e6bf7)'
          required: true
          schema:
            type: string
            maxLength: 200
        - name: orig-device-reference
          in: header
          description: 'Referencia adicional para identificar dispositivo. (Ej. 605ce417-198c-474c-8489-b106714003cf)'
          required: true
          schema:
            type: string
            maxLength: 40
        - name: favoriteSecurityId
          description: Identificador único del nivel de seguridad requerido para ejectar una transacción monetaria como favorito (Ej. 2354)
          in: path
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 36
      requestBody:
        description: Entrada del Servicio
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFavoritesSecurityRequest'
        required: true
      responses:
        "204":
          description: Proceso Satisfactorio.
        "400":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "401":
          description: Sesion invalida.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "409":
          description: La Clave del Token que ingresaste es incorrecto.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "503":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "500":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
      x-atlas-header:
        $ref: '#/components/schemas/UpdateFavoritesSecurityHeaders'
  /favorites-management/favorites:
    get:
      tags:
        - Favorite
      summary: Consulta los favoritos.
      description: |-
        ### Acerca de la funcionalidad expuesta

        Servicio que permite consultar los favoritos del cliente.

        ### Data de Prueba

        Ninguno.

        ### Precondiciones para el consumo de esta versión de la API

        Ninguno.

        ### Usos válidos de Query Parameters

        | Resultado Esperado | Path Param | Query Parameters requeridos |
        | --- | --- | --- |
        | Obtener favoritos relacionados al tipo de operación. | No | operationInformationTypeCodes |

        ### Variantes válidas del Payload (Cuerpo del mensaje)

        No aplica.

        ### Lista de Valores usadas en esta versión de la API

        No aplica.

        ### Códigos de error usados en esta versión de la API

        | Código | HTTP Status | Descripción |
        | --- | --- | --- |
        | BM0001 | 401 | Sesion expirada o inexistente. |
        | BM0002 | 401 | Sesion invalida. |
        | BM9999 | 400 | Ha ocurrido un error en el servicio. |
        | BM9999 | 401 | Ha ocurrido un error en el servicio. |
        | BM9999 | 503 | Ha ocurrido un error en el servicio. |
        | BM9999 | 500 | Ha ocurrido un error en el servicio. |
      operationId: listFavorites
      parameters:
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Authorization'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Request-ID'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/request-date'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/app-code'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/caller-name'
        - name: app-name
          in: header
          description: 'Nombre descriptivo de la aplicacion (Ej. MBBK)'
          required: true
          schema:
            maxLength: 15
            minLength: 0
            type: string
        - name: session-UID
          in: header
          description: 'Llave de Sesion: Identificador unico que permitira vincular todos los eventos relacionados a una sesion del usuario. (Ej. f61d4fae-3dec-11d0-a765-00a0c11e6bf7)'
          required: true
          schema:
            type: string
            maxLength: 200
        - name: orig-device-reference
          in: header
          description: 'Referencia adicional para identificar dispositivo. (Ej. 605ce417-198c-474c-8489-b106714003cf)'
          required: true
          schema:
            type: string
            maxLength: 40
        - name: refresh-cache
          in: header
          description: 'Refresca los favoritos que se encuentran en memoria caché. (Ej. true)'
          required: false
          schema:
            type: boolean
            description: |-
              Indicador que permite refrescar los favoritos que se encuentran en memoria caché
              | Valor | Valor por defecto | Descripción |
              | --- | --- | --- |
              | true | No | Se refresca el contenido de los favoritos que se encuentran en memoria caché |
              | false | Si | No se refresca el contenido de los favoritos que se encuentran en memoria caché |
            example: true
        - name: operationInformationTypeCodes
          in: query
          description: Codigo de Operacion
          required: false
          schema:
            type: string
            pattern: '^((\d{3})(,(\d{3}))*)*$'
            example: '701,705'
            default: ''
      responses:
        "200":
          description: Proceso Satisfactorio.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindFavoritesResponse'
        "400":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "401":
          description: Sesion invalida.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "503":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "500":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
      x-atlas-header:
        $ref: '#/components/schemas/FindFavoritesHeaders'
  /favorites-management/favorites/{favoriteId}:
    get:
      tags:
        - Favorite
      summary: Consulta de un favorito.
      description: |-
        ### Acerca de la funcionalidad expuesta

        Servicio que permite obtener un favorito por su identificador.

        ### Data de Prueba

        Ninguno.

        ### Precondiciones para el consumo de esta versión de la API

        Ninguno.

        ### Usos válidos de Query Parameters

        No aplica.
        
        ### Path Parameters

        | Resultado Esperado | Path Param | Path Parameter requerido |
        | --- | --- | --- |
        | Obtener favorito relacionado a un identificador | Si | favoriteId |

        ### Variantes válidas del Payload (Cuerpo del mensaje)

        No aplica.

        ### Lista de Valores usadas en esta versión de la API

        No aplica.

        ### Códigos de error usados en esta versión de la API

        | Código | HTTP Status | Descripción |
        | --- | --- | --- |
        | BM0001 | 401 | Sesion expirada o inexistente. |
        | BM0002 | 401 | Sesion invalida. |
        | BM9999 | 400 | Ha ocurrido un error en el servicio. |
        | BM9999 | 401 | Ha ocurrido un error en el servicio. |
        | BM0007 | 404 | Recurso no encontrado. |
        | BM9999 | 503 | Ha ocurrido un error en el servicio. |
        | BM9999 | 500 | Ha ocurrido un error en el servicio. |
      operationId: getFavorite
      parameters:
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Authorization'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Request-ID'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/request-date'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/app-code'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/caller-name'
        - name: app-name
          in: header
          description: 'Nombre descriptivo de la aplicacion (Ej. MBBK)'
          required: true
          schema:
            maxLength: 15
            minLength: 0
            type: string
        - name: session-UID
          in: header
          description: 'Llave de Sesion: Identificador unico que permitira vincular todos los eventos relacionados a una sesion del usuario. (Ej. f61d4fae-3dec-11d0-a765-00a0c11e6bf7)'
          required: true
          schema:
            type: string
            maxLength: 200
        - name: orig-device-reference
          in: header
          description: 'Referencia adicional para identificar dispositivo. (Ej. 605ce417-198c-474c-8489-b106714003cf)'
          required: true
          schema:
            type: string
            maxLength: 40
        - name: favoriteId
          description: Identificador único del favorito (Ej. 20a9f68a-05de-11e8-ba89-0ed5f89f718b)
          in: path
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 36
      responses:
        "200":
          description: Proceso Satisfactorio.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindFavoriteByIdResponse'
        "400":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "401":
          description: Sesion invalida.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        '404':
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "503":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "500":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
      x-atlas-header:
        $ref: '#/components/schemas/FindFavoriteByIdHeaders'
    delete:
      tags:
        - Favorite
      summary: Elimina los datos de un favorito.
      description: |-
        ### Acerca de la funcionalidad expuesta

        Servicio que permite eliminar un favorito por su identificador.

        ### Data de Prueba

        Ninguno.

        ### Precondiciones para el consumo de esta versión de la API

        Ninguno.

        ### Usos válidos de Query Parameters

        No aplica.
        
        ### Path Parameters

        | Resultado Esperado | Path Param | Path Parameter requerido |
        | --- | --- | --- |
        | Eliminar favorito relacionado a un identificador | Si | favoriteId |

        ### Variantes válidas del Payload (Cuerpo del mensaje)

        No aplica.

        ### Lista de Valores usadas en esta versión de la API

        No aplica.

        ### Códigos de error usados en esta versión de la API

        | Código | HTTP Status | Descripción |
        | --- | --- | --- |
        | BM0001 | 401 | Sesion expirada o inexistente. |
        | BM0002 | 401 | Sesion invalida. |
        | BM9999 | 400 | Ha ocurrido un error en el servicio. |
        | BM0007 | 404 | Recurso no encontrado. |
        | BM9999 | 503 | Ha ocurrido un error en el servicio. |
        | BM9999 | 500 | Ha ocurrido un error en el servicio. |
      operationId: deleteFavorite
      parameters:
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Authorization'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Request-ID'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/request-date'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/app-code'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/caller-name'
        - name: app-name
          in: header
          description: 'Nombre descriptivo de la aplicacion (Ej. MBBK)'
          required: true
          schema:
            maxLength: 15
            minLength: 0
            type: string
        - name: session-UID
          in: header
          description: 'Llave de Sesion: Identificador unico que permitira vincular todos los eventos relacionados a una sesion del usuario. (Ej. f61d4fae-3dec-11d0-a765-00a0c11e6bf7)'
          required: true
          schema:
            type: string
            maxLength: 200
        - name: orig-device-reference
          in: header
          description: 'Referencia adicional para identificar dispositivo. (Ej. 605ce417-198c-474c-8489-b106714003cf)'
          required: true
          schema:
            type: string
            maxLength: 40
        - name: favoriteId
          description: Identificador único del favorito (Ej. 20a9f68a-05de-11e8-ba89-0ed5f89f718b)
          in: path
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 36
      responses:
        "204":
          description: Proceso Satisfactorio.
        "400":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "401":
          description: Sesion invalida.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        '404':
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "503":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "500":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
      x-atlas-header:
        $ref: '#/components/schemas/DeleteFavoriteHeaders'
    patch:
      tags:
        - Favorite
      summary: Actualización de los datos de un favorito.
      description: |-
        ### Acerca de la funcionalidad expuesta

        Servicio que permite actualizar un favorito por su identificador.

        ### Data de Prueba

        Ninguno.

        ### Precondiciones para el consumo de esta versión de la API

        Ninguno.

        ### Usos válidos de Query Parameters

        No aplica.
        
        ### Path Parameters

        | Resultado Esperado | Path Param | Path Parameter requerido |
        | --- | --- | --- |
        | Actualizar favorito relacionado a un identificador | Si | favoriteId |

        ### Variantes válidas del Payload (Cuerpo del mensaje)

        No aplica.

        ### Lista de Valores usadas en esta versión de la API

        No aplica.

        ### Códigos de error usados en esta versión de la API

        | Código | HTTP Status | Descripción |
        | --- | --- | --- |
        | BM0001 | 401 | Sesion expirada o inexistente. |
        | BM0002 | 401 | Sesion invalida. |
        | BM0100 | 412 | El alias propuesto está siendo utilizado por otro favorito. |
        | BM9999 | 400 | Ha ocurrido un error en el servicio. |
        | BM0007 | 404 | Recurso no encontrado. |
        | BM9999 | 503 | Ha ocurrido un error en el servicio. |
        | BM9999 | 500 | Ha ocurrido un error en el servicio. |
      operationId: updateFavorite
      parameters:
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Authorization'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/Request-ID'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/request-date'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/app-code'
        - $ref: 'https://swaggerhub.lima.bcp.com.pe/v1/domains/BCP_Org/Atlas-Domain/1.0.0#/components/parameters/caller-name'
        - name: app-name
          in: header
          description: 'Nombre descriptivo de la aplicacion (Ej. MBBK)'
          required: true
          schema:
            maxLength: 15
            minLength: 0
            type: string
        - name: session-UID
          in: header
          description: 'Llave de Sesion: Identificador unico que permitira vincular todos los eventos relacionados a una sesion del usuario. (Ej. f61d4fae-3dec-11d0-a765-00a0c11e6bf7)'
          required: true
          schema:
            type: string
            maxLength: 200
        - name: orig-device-reference
          in: header
          description: 'Referencia adicional para identificar dispositivo. (Ej. 605ce417-198c-474c-8489-b106714003cf)'
          required: true
          schema:
            type: string
            maxLength: 40
        - name: favoriteId
          description: Identificador único del favorito (Ej. 20a9f68a-05de-11e8-ba89-0ed5f89f718b)
          in: path
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 36
      requestBody:
        description: Entrada del Servicio
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFavoriteRequest'
        required: true
      responses:
        "204":
          description: Proceso Satisfactorio.
        "400":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "401":
          description: Sesion invalida.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        '404':
          description: Recurso no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "412":
          description: El alias propuesto está siendo utilizado por otro favorito.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "503":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
        "500":
          description: Ha ocurrido un error en el servicio.
          content:
            application/stream+json:
              schema:
                $ref: '#/components/schemas/ApiException'
            application/json:
              schema:
                $ref: '#/components/schemas/ApiException'
      x-atlas-header:
        $ref: '#/components/schemas/UpdateFavoriteHeaders'
components:
  schemas:
    FindFavoritesSecurityHeaders:
      type: object
    UpdateFavoritesSecurityHeaders:
      type: object
    FindFavoritesHeaders:
      type: object
    FindFavoriteByIdHeaders:
      type: object
    UpdateFavoriteHeaders:
      type: object
    DeleteFavoriteHeaders:
      type: object
    UpdateFavoritesSecurityRequest:
      title: UpdateFavoritesSecurityRequest
      required:
        - hasSecurity
      type: object
      properties:
        authorization:
          $ref: '#/components/schemas/AuthorizationPatchRequest'
        hasSecurity:
          type: boolean
          description: |-
            Indicador del nivel de seguridad requerido para la ejecución de una transacción como favorito
            | Valor | Valor por defecto | Descripción |
            | --- | --- | --- |
            | true | No | Se solicitará modo de firma en la ejecución de la transacción |
            | false | Si | No se solicitará modo de firma en la ejecución de la transacción |
          example: true
      description: Define la petición de la operación updateFavoriteSecurity
    UserSignatureModePatchRequest:
      title: UserSignatureModePatchRequest
      required:
        - signatureModeId
      type: object
      properties:
        signatureModeId:
          type: integer
          description: >-
            Código del modo de firma
            
            | Valor | Descripción |
            | --- | --- |
            | 1 | Hard Token |
            | 2 | Touch ID |
            | 3 | Biometric |
            | 4 | Soft Token |
            | 6 | Face ID |
          example: 1
    AuthorizationPatchRequest:
      title: AuthorizationPatchRequest
      required:
        - userSignatureMode
      type: object
      properties:
        userSignatureMode:
          $ref: '#/components/schemas/UserSignatureModePatchRequest'
        keyboard:
          $ref: '#/components/schemas/KeyboardPatchRequest'
    KeyboardPatchRequest:
      title: KeyboardPatchRequest
      required:
        - keys
        - seed
      type: object
      properties:
        seed:
          type: string
          description: Semilla
          example: 66a2ddf8-6127-42de-892f-6f410c191ca3
        keys:
          type: array
          items:
            $ref: '#/components/schemas/KeyPatchRequest'
    KeyPatchRequest:
      title: KeyPatchRequest
      required:
        - value
      type: object
      properties:
        value:
          type: string
          description: Valor del número encriptado
          example: 24920057-6557-4c8b-87a8-e3a1675b18fd
    FindFavoritesResponse:
      title: FindFavoritesResponse
      type: object
      required:
        - favorites
      properties:
        favorites:
          $ref: '#/components/schemas/FavoritesGetResponse'
      description: Define la respuesta de la operación listFavorites
    FavoritesGetResponse:
      title: FavoritesGetResponse
      type: array
      items:
        $ref: '#/components/schemas/FavoriteGetResponse'
    FindFavoritesSecurityResponse:
      title: FindFavoritesSecurityResponse
      required:
        - favoriteSecurityId
        - hasSecurity
      type: object
      properties:
        favoriteSecurityId:
          maxLength: 36
          minLength: 1
          type: string
          description: Identificador único del nivel de seguridad requerido para ejectar una transacción monetaria como favorito
          example: 2354
        hasSecurity:
          type: boolean
          description: |-
            Indicador del nivel de seguridad requerido para la ejecución de una transacción como favorito
            | Valor | Valor por defecto | Descripción |
            | --- | --- | --- |
            | true | No | Se solicitará modo de firma en la ejecución de la transacción |
            | false | Si | No se solicitará modo de firma en la ejecución de la transacción |
          example: true
      description: Define la respuesta de la operación getFavoriteSecurity
    FavoriteGetResponse:
      title: FavoriteGetResponse
      required:
        - displayName
        - favoriteId
        - operationInformation
      type: object
      properties:
        favoriteId:
          maxLength: 36
          minLength: 1
          type: string
          description: Identificador único del favorito
          example: 21c090f5-7378-c315-c932-6d6bd3e271eb
        referenceId:
          type: string
          description: Identificador único del favorito en MongoDb
          example: 5f2357144a13250001d00cf5
        displayName:
          maxLength: 30
          minLength: 1
          type: string
          description: Alias del favorito
          example: Cta. corriente Juan
        operationInformation:
          $ref: '#/components/schemas/BaseOperationInformationResponse'
    BaseOperationInformationResponse:
      title: BaseOperationInformationResponse
      required:
        - type
      type: object
      properties:
        type:
          $ref: '#/components/schemas/TypeResponse'
    TypeResponse:
      title: TypeResponse
      required:
        - code
        - description
      type: object
      properties:
        code:
          type: string
          description: Código del tipo de la operación
          example: "705"
        description:
          type: string
          description: Descripción del tipo de la operación
          example: PAGO DE SERVICIOS
    FindFavoriteByIdResponse:
      title: FindFavoriteByIdResponse
      type: object
      required:
        - displayName
        - favoriteId
        - operationInformation
      properties:
        isActive:
          type: boolean
          description: Indica si el favorito está habilidado para el canal MBBK.
          example: true
        favoriteId:
          maxLength: 36
          minLength: 1
          type: string
          description: Identificador único del favorito
          example: 21c090f5-7378-c315-c932-6d6bd3e271eb
        referenceId:
          type: string
          description: Identificador único del favorito en MongoDb
          example: 5f2357144a13250001d00cf5
        displayName:
          maxLength: 30
          minLength: 1
          type: string
          description: Alias del favorito
          example: Cta. corriente Juan
        operationInformation:
          $ref: '#/components/schemas/OperationInformationResponse'
        additionalNotification:
          $ref: '#/components/schemas/AdditionalInformationResponse'
        destinationInformation:
          $ref: '#/components/schemas/DestinationInformationResponse'
      description: Define la respuesta de la operación getFavorite
    OperationInformationResponse:
      title: OperationInformationResponse
      allOf:
        - $ref: '#/components/schemas/BaseOperationInformationResponse'
        - type: object
          properties:
            amount:
              maxLength: 20
              minLength: 0
              pattern: ^\d+(\.?\d{0,4})?$
              type: string
              description: Monto de la operación
              example: "200.00"
            currency:
              $ref: '#/components/schemas/CurrencyResponse'
            reference:
              type: string
              description: Referencia de la operación
              example: Referencia
            isDeferred:
              type: boolean
              description: "Indicador del momento de la operación \n| Valor | Descripció\
              n |\n| --- | --- |\n| true | Diferida |\n| false | No diferida |"
              example: true
            hasCommission:
              type: boolean
              description: "Indicador del cobro de comisión relacionado a la operació\
              n \n| Valor | Descripción |\n| --- | --- |\n| true | Con comisión |\n\
              | false | Sin comisión |"
              example: true
    CurrencyResponse:
      title: CurrencyResponse
      required:
        - code
        - description
      type: object
      properties:
        code:
          pattern: ^(PEN|USD)$
          type: string
          description: Código del tipo de moneda de la operación
          example: PEN
        description:
          type: string
          description: |-
            Descripción del tipo de moneda de la operación
            | Código | Descripción |
            | --- | --- |
            | PEN | Soles |
            | USD | Dólares |
          example: Soles
    AdditionalInformationResponse:
      title: AdditionalInformationResponse
      required:
        - contactAddress
      type: object
      properties:
        contactAddress:
          $ref: '#/components/schemas/ContactAddressResponse'
    ContactAddressResponse:
      title: ContactAddressResponse
      type: object
      properties:
        phoneNumber:
          type: string
          description: Teléfono de contacto
          example: "946326150"
        email:
          type: string
          description: Correo electrónico de contacto
          example: jperez@bcp.com.pe
    DestinationInformationResponse:
      title: DestinationInformationResponse
      type: object
      properties:
        isSameProductHolder:
          type: boolean
          description: Indicador de la propiedad (propia o de un tercero) de la cuenta
            destino
          example: true
        sunatInformation:
          $ref: '#/components/schemas/SunatInformationResponse'
        providedService:
          $ref: '#/components/schemas/ProvidedServiceResponse'
        destinationProduct:
          $ref: '#/components/schemas/DestinationProductResponse'
        intermediaryProduct:
          $ref: '#/components/schemas/IntermediaryProductResponse'
    SunatInformationResponse:
      title: SunatInformationResponse
      type: object
      properties:
        paymentTypeCode:
          type: string
          description: Código del tipo de pago en SUNAT
          example: "1"
        tribute:
          $ref: '#/components/schemas/TributeResponse'
        tributeFormId:
          type: string
          description: Identificador del formulario en SUNAT
          example: "1662"
    TributeResponse:
      title: TributeResponse
      type: object
      properties:
        id:
          type: string
          description: Identificador del tributo de SUNAT
          example: "3011"
        description:
          type: string
          description: Descripción del tributo de SUNAT
          example: Renta - Distribución Dividendos
    ProvidedServiceResponse:
      title: ProvidedServiceResponse
      required:
        - consumerCode
        - code
      type: object
      properties:
        providedServiceId:
          type: string
          example: '122353467'
          description: Id de información del servicio
        isActive:
          type: boolean
          example: false
          description: Indica si el servicio está activo
        fullName:
          type: string
          description: Descripción del servicio (Ej. SERVICIO ZONA ACC. Y MODA).
          example: SERVICIO ZONA ACC. Y MODA
        consumerCode:
          type: string
          example: '00001364'
          description: Código que identifica a un cliente en una empresa prestadora
            de servicios (suministro, celular, etc.)
        serviceIdentificationDescription:
          type: string
          description: Descripción del código de depositante (Ej. INGRESE DNI CLIENTE).
          example: INGRESE DNI CLIENTE
        displayMessage:
          type: string
          description: Mensaje usuario (Ej. PAGUE PUNTUAL Y EVITE MORAS).
          example: PAGUE PUNTUAL Y EVITE MORAS
        commission:
          type: number
          description: Comisión que se le cobra al depositante por operación. (Ej.
            2.02).
          example: 2.02
        currency:
          $ref: '#/components/schemas/CurrencyResponse'
        paymentVerifyType:
          $ref: '#/components/schemas/PaymentVerifyTypeResponse'
        serviceProvider:
          $ref: '#/components/schemas/ServiceProviderResponse'
    ServiceProviderResponse:
      type: object
      properties:
        serviceProviderId:
          type: integer
          example: 18189
          description: Codigo de empresa
        fullName:
          type: string
          example: 'AMERICATEL - ENTEL'
          description: Nombre de la empresa recaudadora
        category:
          $ref: '#/components/schemas/CategoryResponse'
      title: ServiceProviderResponse
      description: Contiene los datos de las empresas
    CategoryResponse:
      type: object
      properties:
        code:
          type: integer
          example: 3
        description:
          type: string
          example: 'TELEFONIA'
      title: CategoryResponse
      description: Contiene los datos del rubro de la compania
    PaymentVerifyTypeResponse:
      type: object
      properties:
        code:
          type: string
          example: '05'
        description:
          type: string
          example: 'VALIDACION PARCIAL'
      title: PaymentVerifyTypeResponse
      description: Clase Tipo de verificación de pago
    DestinationProductResponse:
      title: DestinationProductResponse
      type: object
      properties:
        productId:
          type: string
          description: Identificador (Nro. Cuenta, CCI, Nro. Tarjeta, etc) del producto
            destino
          example: "3265"
        maskedProductId:
          type: string
          description: Identificador (Nro. Cuenta, CCI, Nro. Tarjeta, etc) del producto
            destino ofuscado
          example: "**** 3265"
        identificationFormatType:
          $ref: '#/components/schemas/IdentificationFormatTypeResponse'
        productHolder:
          $ref: '#/components/schemas/ProductHolderResponse'
        financialEntity:
          $ref: '#/components/schemas/FinancialEntityResponse'
    IdentificationFormatTypeResponse:
      title: IdentificationFormatTypeResponse
      required:
        - code
      type: object
      properties:
        code:
          type: string
          description: Tipo de código del banco destino
          example: SWIFT
    ProductHolderResponse:
      title: ProductHolderResponse
      type: object
      properties:
        productHolderId:
          type: string
          description: Identificar del dueño del producto destino (documentType +
            documentNumber)
          example: "113466295"
        names:
          type: string
          description: Nombre o Razón Social del dueño del producto destino
          example: JUAN JOSE
        fatherLastName:
          type: string
          description: Apellido paterno del dueño del producto destino
          example: PEREZ
        motherLastName:
          type: string
          description: Apellido materno del dueño del producto destino
          example: ROMAN
        address:
          $ref: '#/components/schemas/AddressResponse'
    AddressResponse:
      title: AddressResponse
      type: object
      properties:
        summary:
          type: string
          description: Dirección
          example: 'Av. Juan Pablo II #731'
        geolocation:
          $ref: '#/components/schemas/GeolocationResponse'
    GeolocationResponse:
      title: GeolocationResponse
      type: object
      properties:
        country:
          $ref: '#/components/schemas/CountryResponse'
        region:
          $ref: '#/components/schemas/RegionResponse'
    CountryResponse:
      title: CountryResponse
      type: object
      properties:
        code:
          type: string
          description: Código del país de la dirección
          example: "007"
        description:
          type: string
          description: Descripción del país de la dirección
          example: PERÚ
    RegionResponse:
      title: RegionResponse
      type: object
      properties:
        code:
          type: string
          description: Código del estado del país de la dirección
          example: "007"
        description:
          type: string
          description: Descripción del estado del país de la dirección
          example: LIMA
    BaseFinancialEntityResponse:
      title: BaseFinancialEntityResponse
      type: object
      properties:
        financialEntityIdFormatted:
          type: integer
          description: Identificador de la entidad financiera destino
          example: 51
        financialEntityId:
          type: string
          description: Código de la entidad financiera destino
          example: "051"
        identificationFormatType:
          $ref: '#/components/schemas/IdentificationFormatTypeResponse'
        fullName:
          type: string
          description: Nombre o razón social de la entidad financiera destino
          example: Banco de Suiza
        address:
          $ref: '#/components/schemas/AddressResponse'
    FinancialEntityResponse:
      title: FinancialEntityResponse
      allOf:
        - $ref: '#/components/schemas/BaseFinancialEntityResponse'
        - type: object
          properties:
            agency:
              $ref: '#/components/schemas/AgencyResponse'
    AgencyResponse:
      title: AgencyResponse
      required:
        - code
      type: object
      properties:
        code:
          type: string
          description: Código de la sucursal de la entidad financiera
          example: "002"
    IntermediaryProductResponse:
      title: IntermediaryProductResponse
      type: object
      properties:
        productId:
          type: string
          description: Identificador único del producto de cargo del banco intermediario
          example: "002"
        financialEntity:
          $ref: '#/components/schemas/BaseFinancialEntityResponse'
    UpdateFavoriteRequest:
      title: UpdateFavoriteRequest
      type: object
      required:
        - displayName
      properties:
        displayName:
          maxLength: 20
          minLength: 2
          pattern: '^[a-zA-ZñÑáéíóúÁÉÍÓÚ][a-zA-ZñÑáéíóúÁÉÍÓÚ0-9]+(?: [a-zA-ZñÑáéíóúÁÉÍÓÚ0-9]+)*$'
          type: string
          description: Alias del favorito
          example: Cta. corriente Juan
      description: Define la petición de la operación updateFavorite
    ApiException:
      title: ApiException
      type: object
      properties:
        code:
          type: string
          description: Codigo de error de Sistema
          example: TL0001
        description:
          type: string
          description: Descripcion del error de Sistema
          example: Error al llamar al servicio
        errorType:
          type: string
          description: Tipo de Error de Sistema
          example: TECHNICAL
        exceptionDetails:
          type: array
          description: Lista de detalles del error
          items:
            $ref: '#/components/schemas/ApiExceptionDetail'
        properties:
          type: object
          properties: {}
          description: Lista de propiedades especiales.
      description: Datos del error de sistema.
    ApiExceptionDetail:
      title: ApiExceptionDetail
      type: object
      properties:
        code:
          type: string
          description: Codigo de error del Detalle/Proveedor
          example: MB0008
        component:
          type: string
          description: Nombre del componente de falla
          example: MB.CardInqV2
        description:
          type: string
          description: Descripcion del Detalle
          example: Codigo invalido para el canal
      description: Datos del error técnico.